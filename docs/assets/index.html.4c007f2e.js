import{_ as l,r as e,o,c as p,a as s,b as t,F as c,d as a,e as r}from"./app.41511674.js";const i={},y=s("h1",{id:"regression-analysis-with-fixest",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#regression-analysis-with-fixest","aria-hidden":"true"},"#"),a(" Regression analysis with fixest")],-1),E={href:"https://lrberge.github.io/fixest",target:"_blank",rel:"noopener noreferrer"},F=s("strong",null,"fixest",-1),d=a(" (by Laurent Berg\xE9) is a package designed from the ground up in C++ to make running regressions fast and incredibly easy. It provides in-built support for a variety of linear and non-linear models, as well as regression tables and plotting methods."),f=r(`<p>Before continuing, make sure that you have installed <strong>fixest</strong>. You only have to do this once (or as often as you want to update the package).</p><div class="code--container grid-cols-1"><div><div class="language-r ext-r line-numbers-mode"><pre class="shiki" style="background-color:#191724;"><code><span class="line"><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> Install from CRAN (recommended) </span></span>
<span class="line"><span style="color:#EB6F92;font-style:italic;">install.packages</span><span style="color:#E0DEF4;">(</span><span style="color:#E0DEF4;font-style:italic;">fixest</span><span style="color:#E0DEF4;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> Install the development version from GitHub (advanced) </span></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> Requires Rtools and the remotes package </span></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> remotes::install_github(&#39;lrberge/fixest&#39;)</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></div></div><p>Once <strong>fixest</strong> is installed, don&#39;t forget to load it whenever you want to use it. Unlike Stata, you have to re-load a package every time you start a new R session.</p><div class="code--container grid-cols-1"><div><div class="language-r ext-r line-numbers-mode"><pre class="shiki" style="background-color:#191724;"><code><span class="line"><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> Load fixest into our current R session</span></span>
<span class="line"><span style="color:#EB6F92;font-style:italic;">library</span><span style="color:#E0DEF4;">(</span><span style="color:#E0DEF4;font-style:italic;">fixest</span><span style="color:#E0DEF4;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></div></div><h2 id="introduction-to-fixest" tabindex="-1"><a class="header-anchor" href="#introduction-to-fixest" aria-hidden="true">#</a> Introduction to Fixest</h2><p>The <a href="https://lrberge.github.io/fixest/index.html">fixest</a> package contains a highly flexible set of tools that allow you to estimate a fairly large set of standard regression models. While the package certainly doesn&#39;t cover <em>every</em> model that exists, there is a non-negligible subset of Stata users for whom every model they&#39;ve ever needed to run is covered by <code>fixest.</code></p><p>This includes regular ol&#39; linear regression in the <code>feols()</code> function, which builds off of the Base R standard regression function <code>lm(),</code> but also includes things like instrumental variables via 2SLS, and of course support for as many fixed effects as you&#39;d like. <code>fixest</code> isn&#39;t limited to linear regression either, covering IV and fixed-effects support for a wide range of GLM models like logit, probit, Poisson, negative binomial, and so on in <code>feglm()</code> and <code>fepois().</code></p><p><code>fixest</code> covers all of this while being very fast. If you felt a speed boost going from Stata&#39;s <code>xtreg</code> to <code>reghdfe,</code> get ready for another significant improvement when moving to <code>fixest.</code></p><p>You also get a fair amount of convenience. Adjusting your standard errors to be heteroskedasticity-robust or clustered can be a pain in other R regression functions, but it is easy in <code>fixest</code> with the <code>vcov</code> option. Regression tables, coefficient and interaction-margin plots, selecting long lists of controls without having to type them all in, lagged variables, retrieving estimated fixed effects, Wald tests, and the choice of reference for categorical variables are all made easy. You even get some stuff that&#39;s rather tricky in Stata, like automatically iterating over a bunch of model specifications, basic and staggered difference-in-difference support, or Conley standard errors.</p><p>Using <code>fixest</code> for regression starts with writing a formula. While there are plenty of bells and whistles to ad d, at its core regression formulas take the form <code>y ~ x1 + x2 | fe1 + fe2</code> where y is the outcome, x1 and x2 are predictors, and fe1 and fe2 are your sets of fixed effects.</p><p>To begin, we will use a modified dataset from the CPS with some added variables for demonstration purposes. To load the data run the following:</p><div class="code--container"><div><div class="language-stata ext-stata line-numbers-mode"><pre class="shiki" style="background-color:#191724;"><code><span class="line"></span>
<span class="line"><span style="color:#E0DEF4;">import delimited using </span><span style="color:#F6C177;">&quot;https://raw.githubusercontent.com/stata2r/stata2r.github.io/main/data/cps_long.csv&quot;</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">clear</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></div><div><div class="language-r ext-r line-numbers-mode"><pre class="shiki" style="background-color:#191724;"><code><span class="line"><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> Base R reads CSVs too, but we&#39;ll use data.table here</span></span>
<span class="line"><span style="color:#C4A7E7;font-style:italic;">dat</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">=</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">data.table</span><span style="color:#31748F;">::</span><span style="color:#E0DEF4;font-style:italic;">fread</span><span style="color:#6E6A86;">(</span><span style="color:#F6C177;">&#39;https://raw.githubusercontent.com/stata2r/stata2r.github.io/main/data/cps_long.csv&#39;</span><span style="color:#6E6A86;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></div></div><h2 id="models" tabindex="-1"><a class="header-anchor" href="#models" aria-hidden="true">#</a> Models</h2><p>Unike Stata, which only ever has one active dataset in memory, remember that having multiple datasets in your global environment is the norm in R. We highlight this difference to head off a very common error for new Stata R users: you need to specify <i>which</i> dataset you&#39;re using in your model calls, e.g. \`feols(..., data = dat)\`. We&#39;ll see lots of examples below. At the same time, note that <span class="font-semibold">fixest</span> allows you to set various <span class="text-[#4c807b] underline"><a href="https://lrberge.github.io/fixest/reference/index.html#section-default-values">global options</a></span>, including which dataset you want to use for all of your regressions. Again, we&#39;ll see examples below.</p><h3 id="simple-model" tabindex="-1"><a class="header-anchor" href="#simple-model" aria-hidden="true">#</a> Simple model</h3><div class="code--container"><div><div class="language-stata ext-stata line-numbers-mode"><pre class="shiki" style="background-color:#191724;"><code><span class="line"><span style="color:#31748F;">reg</span><span style="color:#E0DEF4;"> wage educ </span></span>
<span class="line"><span style="color:#31748F;">reg</span><span style="color:#E0DEF4;"> wage educ age</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></div><div><div class="language-r ext-r line-numbers-mode"><pre class="shiki" style="background-color:#191724;"><code><span class="line"><span style="color:#E0DEF4;font-style:italic;">feols</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">wage</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">educ</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">data</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">=</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">dat</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"><span style="color:#E0DEF4;font-style:italic;">feols</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">wage</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">educ</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">+</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">age</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">data</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">=</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">dat</span><span style="color:#6E6A86;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> Aside 1: \`data = ...\` is always the first argument </span></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> after the model formula. So many R users would just </span></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> write: </span></span>
<span class="line"><span style="color:#E0DEF4;font-style:italic;">feols</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">wage</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">educ</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">dat</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> Aside 2: You can also set your dataset globally so </span></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> that you don&#39;t have to reference it each time. </span></span>
<span class="line"><span style="color:#E0DEF4;font-style:italic;">setFixest_estimation</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">data</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">=</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">dat</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"><span style="color:#E0DEF4;font-style:italic;">feols</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">wage</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">educ</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"><span style="color:#E0DEF4;font-style:italic;">feols</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">wage</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">educ</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">+</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">age</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> etc.</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></div></div><h3 id="categorical-variables" tabindex="-1"><a class="header-anchor" href="#categorical-variables" aria-hidden="true">#</a> Categorical variables</h3><div class="code--container"><div><div class="language-stata ext-stata line-numbers-mode"><pre class="shiki" style="background-color:#191724;"><code><span class="line"><span style="color:#31748F;">reg</span><span style="color:#E0DEF4;"> wage educ </span><span style="color:#EBBCBA;">i.</span><span style="color:#E0DEF4;">treat </span></span>
<span class="line"></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">*</span><span style="color:#555169;font-style:italic;"> Specifying a baseline:</span></span>
<span class="line"><span style="color:#31748F;">reg</span><span style="color:#E0DEF4;"> wage educ </span><span style="color:#EBBCBA;">ib</span><span style="color:#E0DEF4;">1</span><span style="color:#EBBCBA;">.</span><span style="color:#E0DEF4;">treat</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></div><div><div class="language-r ext-r line-numbers-mode"><pre class="shiki" style="background-color:#191724;"><code><span class="line"><span style="color:#E0DEF4;font-style:italic;">feols</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">wage</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">educ</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">+</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">i</span><span style="color:#6E6A86;">(</span><span style="color:#E0DEF4;font-style:italic;">treat</span><span style="color:#6E6A86;">),</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">dat</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> Specifying a baseline:</span></span>
<span class="line"><span style="color:#E0DEF4;font-style:italic;">feols</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">wage</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">educ</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">+</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">i</span><span style="color:#6E6A86;">(</span><span style="color:#E0DEF4;font-style:italic;">treat</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">ref</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">=</span><span style="color:#E0DEF4;"> </span><span style="color:#EBBCBA;">1</span><span style="color:#6E6A86;">),</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">dat</span><span style="color:#6E6A86;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></div></div><h3 id="fixed-effects" tabindex="-1"><a class="header-anchor" href="#fixed-effects" aria-hidden="true">#</a> Fixed effects</h3><div class="code--container"><div><div class="language-stata ext-stata line-numbers-mode"><pre class="shiki" style="background-color:#191724;"><code><span class="line"><span style="color:#31748F;">reghdfe</span><span style="color:#E0DEF4;"> wage educ</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#EB6F92;font-style:italic;">absorb</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">countyfips</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span><span style="color:#EB6F92;font-style:italic;">cluster</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">countyfips</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#31748F;">reghdfe</span><span style="color:#E0DEF4;"> wage educ</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#EB6F92;font-style:italic;">absorb</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">countyfips</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;">  </span></span>
<span class="line"></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">*</span><span style="color:#555169;font-style:italic;"> Add more fixed effects... </span></span>
<span class="line"><span style="color:#31748F;">reghdfe</span><span style="color:#E0DEF4;"> wage educ</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#EB6F92;font-style:italic;">absorb</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">countyfips</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">year</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">\\\\\\</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"><span style="color:#E0DEF4;">                   </span><span style="color:#EB6F92;font-style:italic;">vce</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">cluster</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">countyfips</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">year</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"><span style="color:#31748F;">reghdfe</span><span style="color:#E0DEF4;"> wage educ</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#EB6F92;font-style:italic;">absorb</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">countyfips</span><span style="color:#31748F;">#</span><span style="color:#C4A7E7;font-style:italic;">year</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">\\\\\\</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"><span style="color:#E0DEF4;">                   </span><span style="color:#EB6F92;font-style:italic;">vce</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">cluster</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">countyfips</span><span style="color:#31748F;">#</span><span style="color:#C4A7E7;font-style:italic;">year</span><span style="color:#6E6A86;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></div><div><div class="language-r ext-r line-numbers-mode"><pre class="shiki" style="background-color:#191724;"><code><span class="line"><span style="color:#E0DEF4;font-style:italic;">feols</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">wage</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">educ</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">|</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">countyfips</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">dat</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> Aside: fixest automatically clusters SEs by the first </span></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> fixed effect (if there are any). We&#39;ll get to SEs </span></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> later, but if you just want iid errors for a fixed </span></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> effect model: </span></span>
<span class="line"><span style="color:#E0DEF4;font-style:italic;">feols</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">wage</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">educ</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">|</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">countyfips</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">dat</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">vcov</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">=</span><span style="color:#E0DEF4;"> </span><span style="color:#F6C177;">&#39;iid&#39;</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> Add more fixed effects... </span></span>
<span class="line"><span style="color:#E0DEF4;font-style:italic;">feols</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">wage</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">educ</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">|</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">countyfips</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">+</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">year</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"><span style="color:#E0DEF4;">      </span><span style="color:#E0DEF4;font-style:italic;">dat</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">vcov</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">=</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#C4A7E7;font-style:italic;">countyfips</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">+</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">year</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"><span style="color:#E0DEF4;font-style:italic;">feols</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">wage</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">educ</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">|</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">countyfips</span><span style="color:#31748F;">^</span><span style="color:#E0DEF4;font-style:italic;">year</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"><span style="color:#E0DEF4;">      </span><span style="color:#E0DEF4;font-style:italic;">dat</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> defaults to vcov = ~countyfips^year</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></div></div><h3 id="instrumental-variables" tabindex="-1"><a class="header-anchor" href="#instrumental-variables" aria-hidden="true">#</a> Instrumental variables</h3><div class="code--container"><div><div class="language-stata ext-stata line-numbers-mode"><pre class="shiki" style="background-color:#191724;"><code><span class="line"><span style="color:#31748F;">ivreg</span><span style="color:#E0DEF4;"> 2sls wage </span><span style="color:#31748F;">(</span><span style="color:#E0DEF4;">educ </span><span style="color:#31748F;">=</span><span style="color:#E0DEF4;"> age</span><span style="color:#31748F;">)</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"><span style="color:#31748F;">ivreg</span><span style="color:#E0DEF4;"> 2sls wage mar </span><span style="color:#31748F;">(</span><span style="color:#E0DEF4;">educ </span><span style="color:#31748F;">=</span><span style="color:#E0DEF4;"> age</span><span style="color:#31748F;">)</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">*</span><span style="color:#555169;font-style:italic;"> With fixed effects </span></span>
<span class="line"><span style="color:#31748F;">ivreghdfe</span><span style="color:#E0DEF4;"> 2sls wage mar </span><span style="color:#31748F;">(</span><span style="color:#E0DEF4;">educ </span><span style="color:#31748F;">=</span><span style="color:#E0DEF4;"> age</span><span style="color:#31748F;">)</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#EB6F92;font-style:italic;">absorb</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">countyfips</span><span style="color:#6E6A86;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></div><div><div class="language-r ext-r line-numbers-mode"><pre class="shiki" style="background-color:#191724;"><code><span class="line"><span style="color:#E0DEF4;font-style:italic;">feols</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">wage</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#EBBCBA;">1</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">|</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">educ</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">age</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">dat</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;">  </span></span>
<span class="line"><span style="color:#E0DEF4;font-style:italic;">feols</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">wage</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">mar</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">|</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">educ</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">age</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">dat</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> With fixed effects (IV 1st stage always comes last) </span></span>
<span class="line"><span style="color:#E0DEF4;font-style:italic;">feols</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">wage</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">mar</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">|</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">countyfips</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">|</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">educ</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">age</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">dat</span><span style="color:#6E6A86;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></div></div><h3 id="macros-wildcards-and-shortcuts" tabindex="-1"><a class="header-anchor" href="#macros-wildcards-and-shortcuts" aria-hidden="true">#</a> Macros, wildcards and shortcuts</h3><div class="code--container"><div><div class="language-stata ext-stata line-numbers-mode"><pre class="shiki" style="background-color:#191724;"><code><span class="line"><span style="color:#31748F;">local</span><span style="color:#E0DEF4;"> </span><span style="color:#9CCFD8;">ctrls</span><span style="color:#E0DEF4;"> age black hisp marr </span></span>
<span class="line"><span style="color:#31748F;">reg</span><span style="color:#E0DEF4;"> wage educ </span><span style="color:#F6C177;">\`</span><span style="color:#9CCFD8;">ctrls</span><span style="color:#F6C177;">&#39;</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#31748F;">reg</span><span style="color:#E0DEF4;"> wage educ x</span><span style="color:#31748F;">*</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"><span style="color:#31748F;">reg</span><span style="color:#E0DEF4;"> wage educ </span><span style="color:#31748F;">*</span><span style="color:#E0DEF4;">sp  </span></span>
<span class="line"><span style="color:#31748F;">reg</span><span style="color:#E0DEF4;"> wage educ </span><span style="color:#31748F;">*ac*</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></div><div><div class="language-r ext-r line-numbers-mode"><pre class="shiki" style="background-color:#191724;"><code><span class="line"><span style="color:#C4A7E7;font-style:italic;">ctrls</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">=</span><span style="color:#E0DEF4;"> </span><span style="color:#EB6F92;font-style:italic;">c</span><span style="color:#E0DEF4;">(</span><span style="color:#F6C177;">&quot;age&quot;</span><span style="color:#E0DEF4;">, </span><span style="color:#F6C177;">&quot;black&quot;</span><span style="color:#E0DEF4;">, </span><span style="color:#F6C177;">&quot;hisp&quot;</span><span style="color:#E0DEF4;">, </span><span style="color:#F6C177;">&quot;marr&quot;</span><span style="color:#E0DEF4;">) </span></span>
<span class="line"><span style="color:#E0DEF4;font-style:italic;">feols</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">wage</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">educ</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">+</span><span style="color:#E0DEF4;"> .</span><span style="color:#6E6A86;">[</span><span style="color:#E0DEF4;font-style:italic;">ctrls</span><span style="color:#6E6A86;">],</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">dat</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#E0DEF4;font-style:italic;">feols</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">wage</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">educ</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">+</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">..</span><span style="color:#6E6A86;">(</span><span style="color:#F6C177;">&#39;^x&#39;</span><span style="color:#6E6A86;">),</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">dat</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> ^ = starts with </span></span>
<span class="line"><span style="color:#E0DEF4;font-style:italic;">feols</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">wage</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">educ</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">+</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">..</span><span style="color:#6E6A86;">(</span><span style="color:#F6C177;">&#39;sp$&#39;</span><span style="color:#6E6A86;">),</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">dat</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> $ = ends with </span></span>
<span class="line"><span style="color:#E0DEF4;font-style:italic;">feols</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">wage</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">educ</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">+</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">..</span><span style="color:#6E6A86;">(</span><span style="color:#F6C177;">&#39;ac&#39;</span><span style="color:#6E6A86;">),</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">dat</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> Many more macro options. See \`?setFixest_fml\` and</span></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> \`?setFixest_estimation\`. Example (reminder) where </span></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> you set your dataset globally, so you don&#39;t have to </span></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> retype \`data = ...\` anymore. </span></span>
<span class="line"><span style="color:#E0DEF4;font-style:italic;">setFixed_estimation</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">data</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">=</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">dat</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"><span style="color:#E0DEF4;font-style:italic;">feols</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">wage</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">educ</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"><span style="color:#E0DEF4;font-style:italic;">feols</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">wage</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">educ</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">+</span><span style="color:#E0DEF4;"> .</span><span style="color:#6E6A86;">[</span><span style="color:#E0DEF4;font-style:italic;">ctrls</span><span style="color:#6E6A86;">]</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">|</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">statefips</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> Etc.</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div></div></div><h2 id="interactions" tabindex="-1"><a class="header-anchor" href="#interactions" aria-hidden="true">#</a> Interactions</h2><h3 id="interact-continuous-variables" tabindex="-1"><a class="header-anchor" href="#interact-continuous-variables" aria-hidden="true">#</a> Interact continuous variables</h3><div class="code--container"><div><div class="language-stata ext-stata line-numbers-mode"><pre class="shiki" style="background-color:#191724;"><code><span class="line"><span style="color:#31748F;">reg</span><span style="color:#E0DEF4;"> wage </span><span style="color:#EBBCBA;">c.</span><span style="color:#E0DEF4;">educ</span><span style="color:#31748F;">#</span><span style="color:#EBBCBA;">c.</span><span style="color:#E0DEF4;">age </span></span>
<span class="line"><span style="color:#31748F;">reg</span><span style="color:#E0DEF4;"> wage </span><span style="color:#EBBCBA;">c.</span><span style="color:#E0DEF4;">educ</span><span style="color:#31748F;">##</span><span style="color:#EBBCBA;">c.</span><span style="color:#E0DEF4;">age </span></span>
<span class="line"></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">*</span><span style="color:#555169;font-style:italic;"> Polynomials </span></span>
<span class="line"><span style="color:#31748F;">reg</span><span style="color:#E0DEF4;"> wage </span><span style="color:#EBBCBA;">c.</span><span style="color:#E0DEF4;">age</span><span style="color:#31748F;">#</span><span style="color:#EBBCBA;">c.</span><span style="color:#E0DEF4;">age </span></span>
<span class="line"><span style="color:#31748F;">reg</span><span style="color:#E0DEF4;"> wage </span><span style="color:#EBBCBA;">c.</span><span style="color:#E0DEF4;">age</span><span style="color:#31748F;">##</span><span style="color:#EBBCBA;">c.</span><span style="color:#E0DEF4;">age </span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></div><div><div class="language-r ext-r line-numbers-mode"><pre class="shiki" style="background-color:#191724;"><code><span class="line"><span style="color:#E0DEF4;font-style:italic;">feols</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">wage</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">educ</span><span style="color:#31748F;">:</span><span style="color:#E0DEF4;font-style:italic;">age</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">dat</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"><span style="color:#E0DEF4;font-style:italic;">feols</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">wage</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">educ</span><span style="color:#31748F;">*</span><span style="color:#E0DEF4;font-style:italic;">age</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">dat</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> Polynomials </span></span>
<span class="line"><span style="color:#E0DEF4;font-style:italic;">feols</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">wage</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#EB6F92;font-style:italic;">I</span><span style="color:#E0DEF4;">(</span><span style="color:#E0DEF4;font-style:italic;">age</span><span style="color:#31748F;">^</span><span style="color:#EBBCBA;">2</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;">, </span><span style="color:#E0DEF4;font-style:italic;">dat</span><span style="color:#E0DEF4;">) </span></span>
<span class="line"><span style="color:#E0DEF4;font-style:italic;">feols</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">wage</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#EB6F92;font-style:italic;">poly</span><span style="color:#E0DEF4;">(</span><span style="color:#E0DEF4;font-style:italic;">age</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#EBBCBA;">2</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">raw</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">=</span><span style="color:#E0DEF4;"> </span><span style="color:#EBBCBA;">TRUE</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></div></div><h3 id="interact-categorical-variables" tabindex="-1"><a class="header-anchor" href="#interact-categorical-variables" aria-hidden="true">#</a> Interact categorical variables</h3><div class="code--container"><div><div class="language-stata ext-stata line-numbers-mode"><pre class="shiki" style="background-color:#191724;"><code><span class="line"><span style="color:#31748F;">reg</span><span style="color:#E0DEF4;"> wage </span><span style="color:#EBBCBA;">i.</span><span style="color:#E0DEF4;">treat</span><span style="color:#31748F;">#</span><span style="color:#EBBCBA;">i.</span><span style="color:#E0DEF4;">hisp </span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#31748F;">reg</span><span style="color:#E0DEF4;"> wage </span><span style="color:#EBBCBA;">i.</span><span style="color:#E0DEF4;">treat </span><span style="color:#EBBCBA;">i.</span><span style="color:#E0DEF4;">treat</span><span style="color:#31748F;">#</span><span style="color:#EBBCBA;">i.</span><span style="color:#E0DEF4;">hisp</span></span>
<span class="line"><span style="color:#31748F;">reg</span><span style="color:#E0DEF4;"> wage </span><span style="color:#EBBCBA;">i.</span><span style="color:#E0DEF4;">treat</span><span style="color:#31748F;">##</span><span style="color:#EBBCBA;">i.</span><span style="color:#E0DEF4;">hisp</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></div><div><div class="language-r ext-r line-numbers-mode"><pre class="shiki" style="background-color:#191724;"><code><span class="line"><span style="color:#E0DEF4;font-style:italic;">feols</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">wage</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">i</span><span style="color:#6E6A86;">(</span><span style="color:#E0DEF4;font-style:italic;">treat</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">i.hisp</span><span style="color:#6E6A86;">),</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">dat</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> Aside: i() is a fixest-specific shortcut that also </span></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> has synergies with some other fixest functions. But </span></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> base R interaction operators all still work, e.g. </span></span>
<span class="line"><span style="color:#E0DEF4;font-style:italic;">feols</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">wage</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#EB6F92;font-style:italic;">factor</span><span style="color:#E0DEF4;">(</span><span style="color:#E0DEF4;font-style:italic;">treat</span><span style="color:#6E6A86;">)</span><span style="color:#31748F;">/</span><span style="color:#EB6F92;font-style:italic;">factor</span><span style="color:#E0DEF4;">(</span><span style="color:#E0DEF4;font-style:italic;">hisp</span><span style="color:#E0DEF4;">), </span><span style="color:#E0DEF4;font-style:italic;">dat</span><span style="color:#E0DEF4;">) </span></span>
<span class="line"><span style="color:#E0DEF4;font-style:italic;">feols</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">wage</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#EB6F92;font-style:italic;">factor</span><span style="color:#E0DEF4;">(</span><span style="color:#E0DEF4;font-style:italic;">treat</span><span style="color:#6E6A86;">)</span><span style="color:#31748F;">*</span><span style="color:#EB6F92;font-style:italic;">factor</span><span style="color:#E0DEF4;">(</span><span style="color:#E0DEF4;font-style:italic;">hisp</span><span style="color:#E0DEF4;">), </span><span style="color:#E0DEF4;font-style:italic;">dat</span><span style="color:#E0DEF4;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></div></div><h3 id="interact-categorical-with-continuous-variables" tabindex="-1"><a class="header-anchor" href="#interact-categorical-with-continuous-variables" aria-hidden="true">#</a> Interact categorical with continuous variables</h3><div class="code--container"><div><div class="language-stata ext-stata line-numbers-mode"><pre class="shiki" style="background-color:#191724;"><code><span class="line"><span style="color:#31748F;">reg</span><span style="color:#E0DEF4;"> wage </span><span style="color:#EBBCBA;">i.</span><span style="color:#E0DEF4;">treat</span><span style="color:#31748F;">#</span><span style="color:#EBBCBA;">c.</span><span style="color:#E0DEF4;">age </span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#31748F;">reg</span><span style="color:#E0DEF4;"> wage </span><span style="color:#EBBCBA;">i.</span><span style="color:#E0DEF4;">treat</span><span style="color:#31748F;">#</span><span style="color:#EBBCBA;">c.</span><span style="color:#E0DEF4;">age </span></span>
<span class="line"><span style="color:#31748F;">reg</span><span style="color:#E0DEF4;"> wage </span><span style="color:#EBBCBA;">i.</span><span style="color:#E0DEF4;">treat </span><span style="color:#EBBCBA;">i.</span><span style="color:#E0DEF4;">treat</span><span style="color:#31748F;">#</span><span style="color:#EBBCBA;">c.</span><span style="color:#E0DEF4;">age </span></span>
<span class="line"><span style="color:#31748F;">reg</span><span style="color:#E0DEF4;"> wage </span><span style="color:#EBBCBA;">i.</span><span style="color:#E0DEF4;">treat</span><span style="color:#31748F;">##</span><span style="color:#EBBCBA;">c.</span><span style="color:#E0DEF4;">age</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></div><div><div class="language-r ext-r line-numbers-mode"><pre class="shiki" style="background-color:#191724;"><code><span class="line"><span style="color:#E0DEF4;font-style:italic;">feols</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">wage</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">i</span><span style="color:#6E6A86;">(</span><span style="color:#E0DEF4;font-style:italic;">treat</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">age</span><span style="color:#6E6A86;">),</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">dat</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> Aside: i() is a fixest-specific shortcut that also </span></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> has synergies with some other fixest functions. But </span></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> base R interaction operators all still work, e.g. </span></span>
<span class="line"><span style="color:#E0DEF4;font-style:italic;">feols</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">wage</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#EB6F92;font-style:italic;">factor</span><span style="color:#E0DEF4;">(</span><span style="color:#E0DEF4;font-style:italic;">treat</span><span style="color:#6E6A86;">)</span><span style="color:#31748F;">:</span><span style="color:#E0DEF4;font-style:italic;">age</span><span style="color:#E0DEF4;">, </span><span style="color:#E0DEF4;font-style:italic;">dat</span><span style="color:#E0DEF4;">) </span></span>
<span class="line"><span style="color:#E0DEF4;font-style:italic;">feols</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">wage</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#EB6F92;font-style:italic;">factor</span><span style="color:#E0DEF4;">(</span><span style="color:#E0DEF4;font-style:italic;">treat</span><span style="color:#6E6A86;">)</span><span style="color:#31748F;">/</span><span style="color:#E0DEF4;font-style:italic;">age</span><span style="color:#E0DEF4;">, </span><span style="color:#E0DEF4;font-style:italic;">dat</span><span style="color:#E0DEF4;">) </span></span>
<span class="line"><span style="color:#E0DEF4;font-style:italic;">feols</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">wage</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#EB6F92;font-style:italic;">factor</span><span style="color:#E0DEF4;">(</span><span style="color:#E0DEF4;font-style:italic;">treat</span><span style="color:#6E6A86;">)</span><span style="color:#31748F;">*</span><span style="color:#E0DEF4;font-style:italic;">age</span><span style="color:#E0DEF4;">, </span><span style="color:#E0DEF4;font-style:italic;">dat</span><span style="color:#E0DEF4;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></div></div><h3 id="interact-fixed-effects" tabindex="-1"><a class="header-anchor" href="#interact-fixed-effects" aria-hidden="true">#</a> Interact fixed effects</h3><div class="code--container"><div><div class="language-stata ext-stata line-numbers-mode"><pre class="shiki" style="background-color:#191724;"><code><span class="line"><span style="color:#6E6A86;font-style:italic;">*</span><span style="color:#555169;font-style:italic;"> Combine fixed effects </span></span>
<span class="line"><span style="color:#31748F;">reghdfe</span><span style="color:#E0DEF4;"> wage educ</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#EB6F92;font-style:italic;">absorb</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">statefips</span><span style="color:#31748F;">#</span><span style="color:#C4A7E7;font-style:italic;">year</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">*</span><span style="color:#555169;font-style:italic;"> Varying slopes (e.g. time trend for each state) </span></span>
<span class="line"><span style="color:#E0DEF4;">? </span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></div><div><div class="language-r ext-r line-numbers-mode"><pre class="shiki" style="background-color:#191724;"><code><span class="line"><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> Combine fixed effects </span></span>
<span class="line"><span style="color:#E0DEF4;font-style:italic;">feols</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">wage</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">educ</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">|</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">statefips</span><span style="color:#31748F;">^</span><span style="color:#E0DEF4;font-style:italic;">year</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">dat</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> Varying slopes (e.g. time trend for each state) </span></span>
<span class="line"><span style="color:#E0DEF4;font-style:italic;">feols</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">wage</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">educ</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">|</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">statefips</span><span style="color:#6E6A86;">[</span><span style="color:#E0DEF4;font-style:italic;">year</span><span style="color:#6E6A86;">],</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">dat</span><span style="color:#6E6A86;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></div></div><h2 id="standard-errors" tabindex="-1"><a class="header-anchor" href="#standard-errors" aria-hidden="true">#</a> Standard errors</h2><p>While you can specify standard errors inside the original <code>fixest</code> model call (just like Stata), a unique feature of R is that you can adjust errors for an exisiting model <em>on the fly</em>. This has <a href="https://grantmcdermott.com/better-way-adjust-SEs">several benefits</a>, including being much more efficient since you don&#39;t have to re-estimate your whole model. We&#39;ll try to highlight examples of both approaches below.</p><h3 id="hc" tabindex="-1"><a class="header-anchor" href="#hc" aria-hidden="true">#</a> HC</h3><div class="code--container"><div><div class="language-stata ext-stata line-numbers-mode"><pre class="shiki" style="background-color:#191724;"><code><span class="line"><span style="color:#31748F;">reg</span><span style="color:#E0DEF4;"> wage educ</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#EB6F92;font-style:italic;">vce</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">robust</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"><span style="color:#31748F;">reg</span><span style="color:#E0DEF4;"> wage educ</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#EB6F92;font-style:italic;">vce</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">hc3</span><span style="color:#6E6A86;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></div><div><div class="language-r ext-r line-numbers-mode"><pre class="shiki" style="background-color:#191724;"><code><span class="line"><span style="color:#E0DEF4;font-style:italic;">feols</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">wage</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">educ</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">dat</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">vcov</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">=</span><span style="color:#E0DEF4;"> </span><span style="color:#F6C177;">&#39;hc1&#39;</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"><span style="color:#E0DEF4;font-style:italic;">feols</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">wage</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">educ</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">dat</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">vcov</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">=</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">sandwich</span><span style="color:#31748F;">:</span><span style="color:#E0DEF4;font-style:italic;">vcovHC</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> Note: You can also adjust the SEs of an existing model </span></span>
<span class="line"><span style="color:#C4A7E7;font-style:italic;">m</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">=</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">feols</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">wage</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">educ</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">dat</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"><span style="color:#EB6F92;font-style:italic;">summary</span><span style="color:#E0DEF4;">(</span><span style="color:#E0DEF4;font-style:italic;">m</span><span style="color:#E0DEF4;">, </span><span style="color:#C4A7E7;font-style:italic;">vcov</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">=</span><span style="color:#E0DEF4;"> </span><span style="color:#F6C177;">&#39;hc1&#39;</span><span style="color:#E0DEF4;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></div></div><h3 id="hac" tabindex="-1"><a class="header-anchor" href="#hac" aria-hidden="true">#</a> HAC</h3><div class="code--container"><div><div class="language-stata ext-stata line-numbers-mode"><pre class="shiki" style="background-color:#191724;"><code><span class="line"><span style="color:#31748F;">xtset</span><span style="color:#E0DEF4;"> id year</span></span>
<span class="line"><span style="color:#31748F;">ivreghdfe</span><span style="color:#E0DEF4;"> wage educ</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#EB6F92;font-style:italic;">bw</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">auto</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span><span style="color:#EB6F92;font-style:italic;">vce</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">robust</span><span style="color:#6E6A86;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></div><div><div class="language-r ext-r line-numbers-mode"><pre class="shiki" style="background-color:#191724;"><code><span class="line"><span style="color:#E0DEF4;font-style:italic;">feols</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">y</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">x</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">dat</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">vcov</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">=</span><span style="color:#E0DEF4;"> </span><span style="color:#F6C177;">&#39;NW&#39;</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">panel.id</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">=</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#C4A7E7;font-style:italic;">unit</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">+</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">time</span><span style="color:#6E6A86;">)</span></span>
<span class="line"><span style="color:#E0DEF4;font-style:italic;">feols</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">wage</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">educ</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">dat</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">vcov</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">=</span><span style="color:#E0DEF4;"> </span><span style="color:#F6C177;">&#39;NW&#39;</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> if panel id is already set (see below)</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></div></div><h3 id="clustered" tabindex="-1"><a class="header-anchor" href="#clustered" aria-hidden="true">#</a> Clustered</h3><div class="code--container"><div><div class="language-stata ext-stata line-numbers-mode"><pre class="shiki" style="background-color:#191724;"><code><span class="line"><span style="color:#31748F;">reghdfe</span><span style="color:#E0DEF4;"> wage educ</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#EB6F92;font-style:italic;">absorb</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">countyfips</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">\\\\\\</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"><span style="color:#E0DEF4;">                   </span><span style="color:#EB6F92;font-style:italic;">vce</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">cluster</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">countyfips</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">*</span><span style="color:#555169;font-style:italic;"> Twoway clustering etc. </span></span>
<span class="line"><span style="color:#31748F;">reghdfe</span><span style="color:#E0DEF4;"> wage educ</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#EB6F92;font-style:italic;">absorb</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">countyfips</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">year</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">\\\\\\</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"><span style="color:#E0DEF4;">                   </span><span style="color:#EB6F92;font-style:italic;">vce</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">cluster</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">countyfips</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">year</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#31748F;">reghdfe</span><span style="color:#E0DEF4;"> wage educ</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#EB6F92;font-style:italic;">absorb</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">countyfips</span><span style="color:#31748F;">#</span><span style="color:#C4A7E7;font-style:italic;">year</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">\\\\\\</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"><span style="color:#E0DEF4;">                   </span><span style="color:#EB6F92;font-style:italic;">vce</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">cluster</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">countyfips</span><span style="color:#31748F;">#</span><span style="color:#C4A7E7;font-style:italic;">year</span><span style="color:#6E6A86;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></div><div><div class="language-r ext-r line-numbers-mode"><pre class="shiki" style="background-color:#191724;"><code><span class="line"><span style="color:#E0DEF4;font-style:italic;">feols</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">wage</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">educ</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">|</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">countyfips</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">dat</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> Auto clusters by FE </span></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> feols(wage ~ educ | countyfips, dat, vcov = ~countyfips) # ofc can be explicit too </span></span>
<span class="line"></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> Twoway clustering etc. </span></span>
<span class="line"><span style="color:#E0DEF4;font-style:italic;">feols</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">wage</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">educ</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">|</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">countyfips</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">+</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">year</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"><span style="color:#E0DEF4;">      </span><span style="color:#E0DEF4;font-style:italic;">dat</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">vcov</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">=</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#C4A7E7;font-style:italic;">countyfips</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">+</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">year</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> feols(wage ~ educ | countyfips + year, </span></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;">      dat, vcov = &#39;twoway&#39;) ## same as above </span></span>
<span class="line"><span style="color:#E0DEF4;font-style:italic;">feols</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">wage</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">educ</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">|</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">countyfips</span><span style="color:#31748F;">^</span><span style="color:#E0DEF4;font-style:italic;">year</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"><span style="color:#E0DEF4;">      </span><span style="color:#E0DEF4;font-style:italic;">dat</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">vcov</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">=</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;font-style:italic;">countyfips</span><span style="color:#31748F;">^</span><span style="color:#E0DEF4;font-style:italic;">year</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> Reminder that you can adjust the SEs of existing </span></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> fixest models on-the-fly. </span></span>
<span class="line"><span style="color:#C4A7E7;font-style:italic;">m</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">=</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">feols</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">wage</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">educ</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">|</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">countyfips</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">+</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">year</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">dat</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"><span style="color:#E0DEF4;font-style:italic;">m</span><span style="color:#E0DEF4;"> </span><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> Clustered by countyfips (default) </span></span>
<span class="line"><span style="color:#EB6F92;font-style:italic;">summary</span><span style="color:#E0DEF4;">(</span><span style="color:#E0DEF4;font-style:italic;">m</span><span style="color:#E0DEF4;">, </span><span style="color:#C4A7E7;font-style:italic;">vcov</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">=</span><span style="color:#E0DEF4;"> </span><span style="color:#F6C177;">&#39;twoway&#39;</span><span style="color:#E0DEF4;">) </span></span>
<span class="line"><span style="color:#E0DEF4;font-style:italic;">summmary</span><span style="color:#6E6A86;">(</span><span style="color:#E0DEF4;font-style:italic;">m</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">vcov</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">=</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;font-style:italic;">countyfips</span><span style="color:#31748F;">^</span><span style="color:#E0DEF4;font-style:italic;">year</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> etc.</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div></div></div><h3 id="conley-standard-errors" tabindex="-1"><a class="header-anchor" href="#conley-standard-errors" aria-hidden="true">#</a> Conley standard errors</h3><div class="code--container"><div><div class="language-stata ext-stata line-numbers-mode"><pre class="shiki" style="background-color:#191724;"><code><span class="line"><span style="color:#6E6A86;font-style:italic;">*</span><span style="color:#555169;font-style:italic;"> See: http://www.trfetzer.com/conley-spatial-hac-errors-with-fixed-effects/</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></div><div><div class="language-r ext-r line-numbers-mode"><pre class="shiki" style="background-color:#191724;"><code><span class="line"><span style="color:#E0DEF4;font-style:italic;">feols</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">wage</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">educ</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">dat</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">vcov</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">=</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">conley</span><span style="color:#6E6A86;">(</span><span style="color:#F6C177;">&quot;25 mi&quot;</span><span style="color:#6E6A86;">))</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></div></div><h2 id="presentation" tabindex="-1"><a class="header-anchor" href="#presentation" aria-hidden="true">#</a> Presentation</h2><h3 id="regression-table" tabindex="-1"><a class="header-anchor" href="#regression-table" aria-hidden="true">#</a> Regression table</h3><div class="code--container"><div><div class="language-stata ext-stata line-numbers-mode"><pre class="shiki" style="background-color:#191724;"><code><span class="line"><span style="color:#31748F;">reg</span><span style="color:#E0DEF4;"> wage educ age </span></span>
<span class="line"><span style="color:#31748F;">eststo</span><span style="color:#E0DEF4;"> est1 </span></span>
<span class="line"><span style="color:#31748F;">esttab</span><span style="color:#E0DEF4;"> est1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#31748F;">reg</span><span style="color:#E0DEF4;"> wage educ age black hisp</span></span>
<span class="line"><span style="color:#31748F;">eststo</span><span style="color:#E0DEF4;"> est2</span></span>
<span class="line"><span style="color:#31748F;">esttab</span><span style="color:#E0DEF4;"> est1 est2 </span></span>
<span class="line"></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">*</span><span style="color:#555169;font-style:italic;"> There aren&#39;t great Stata equivalents for these next </span></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">*</span><span style="color:#555169;font-style:italic;"> examples. You could mimic with a loop, but that will </span></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">*</span><span style="color:#555169;font-style:italic;"> require more code and be slower (since your whole </span></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">*</span><span style="color:#555169;font-style:italic;"> model has to be reestimated each time).</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></div><div><div class="language-r ext-r line-numbers-mode"><pre class="shiki" style="background-color:#191724;"><code><span class="line"><span style="color:#C4A7E7;font-style:italic;">est1</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">=</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">feols</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">wage</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">educ</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">+</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">age</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">dat</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"><span style="color:#E0DEF4;font-style:italic;">etable</span><span style="color:#6E6A86;">(</span><span style="color:#E0DEF4;font-style:italic;">est1</span><span style="color:#6E6A86;">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C4A7E7;font-style:italic;">est2</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">=</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">feols</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">wage</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">educ</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">+</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">age</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">+</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">black</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">+</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">hisp</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">dat</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"><span style="color:#E0DEF4;font-style:italic;">etable</span><span style="color:#6E6A86;">(</span><span style="color:#E0DEF4;font-style:italic;">est1</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">est2</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> SEs for existing models can be adjusted on-the-fly </span></span>
<span class="line"><span style="color:#E0DEF4;font-style:italic;">etable</span><span style="color:#6E6A86;">(</span><span style="color:#E0DEF4;font-style:italic;">est1</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">vcov</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">=</span><span style="color:#E0DEF4;"> </span><span style="color:#F6C177;">&#39;hc1&#39;</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> Report multiple SEs for the same model </span></span>
<span class="line"><span style="color:#E0DEF4;font-style:italic;">etable</span><span style="color:#6E6A86;">(</span><span style="color:#E0DEF4;font-style:italic;">est1</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">vcov</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">=</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">list</span><span style="color:#6E6A86;">(</span><span style="color:#F6C177;">&#39;iid&#39;</span><span style="color:#E0DEF4;">, </span><span style="color:#F6C177;">&#39;hc1&#39;</span><span style="color:#E0DEF4;">, </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;font-style:italic;">id</span><span style="color:#E0DEF4;">, </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;font-style:italic;">countyfips</span><span style="color:#6E6A86;">))</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> Multi-model example </span></span>
<span class="line"><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> (Two dep. vars, stepwise coefs, varying slopes, etc.) </span></span>
<span class="line"><span style="color:#C4A7E7;font-style:italic;">est_mult</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">=</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">feols</span><span style="color:#6E6A86;">(</span><span style="color:#EB6F92;font-style:italic;">c</span><span style="color:#E0DEF4;">(</span><span style="color:#E0DEF4;font-style:italic;">wage</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">age</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">educ</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">+</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">csw</span><span style="color:#6E6A86;">(</span><span style="color:#E0DEF4;font-style:italic;">hisp</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">black</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">|</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"><span style="color:#E0DEF4;">                     </span><span style="color:#E0DEF4;font-style:italic;">statefips</span><span style="color:#6E6A86;">[</span><span style="color:#E0DEF4;font-style:italic;">year</span><span style="color:#6E6A86;">]</span><span style="color:#E0DEF4;">, </span></span>
<span class="line"><span style="color:#E0DEF4;">                 </span><span style="color:#E0DEF4;font-style:italic;">dat</span><span style="color:#E0DEF4;">, </span><span style="color:#C4A7E7;font-style:italic;">vcov</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">=</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;font-style:italic;">statefips</span><span style="color:#31748F;">^</span><span style="color:#E0DEF4;font-style:italic;">year</span><span style="color:#E0DEF4;">) </span></span>
<span class="line"><span style="color:#E0DEF4;font-style:italic;">etable</span><span style="color:#6E6A86;">(</span><span style="color:#E0DEF4;font-style:italic;">est_mult</span><span style="color:#6E6A86;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div></div></div><h3 id="coefficient-plot" tabindex="-1"><a class="header-anchor" href="#coefficient-plot" aria-hidden="true">#</a> Coefficient plot</h3><div class="code--container"><div><div class="language-stata ext-stata line-numbers-mode"><pre class="shiki" style="background-color:#191724;"><code><span class="line"><span style="color:#6E6A86;font-style:italic;">*</span><span style="color:#555169;font-style:italic;"> Assume we have est1 and est2 from above </span></span>
<span class="line"><span style="color:#E0DEF4;">coefplot est1 </span></span>
<span class="line"><span style="color:#E0DEF4;">coefplot est1 est2</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></div><div><div class="language-r ext-r line-numbers-mode"><pre class="shiki" style="background-color:#191724;"><code><span class="line"><span style="color:#6E6A86;font-style:italic;">#</span><span style="color:#555169;font-style:italic;"> Assume we have est1 and est2 from above </span></span>
<span class="line"><span style="color:#E0DEF4;font-style:italic;">coefplot</span><span style="color:#6E6A86;">(</span><span style="color:#E0DEF4;font-style:italic;">est1</span><span style="color:#6E6A86;">)</span><span style="color:#E0DEF4;"> </span></span>
<span class="line"><span style="color:#E0DEF4;font-style:italic;">coefplot</span><span style="color:#6E6A86;">(</span><span style="color:#31748F;">list</span><span style="color:#6E6A86;">(</span><span style="color:#E0DEF4;font-style:italic;">est1</span><span style="color:#E0DEF4;">, </span><span style="color:#E0DEF4;font-style:italic;">est2</span><span style="color:#6E6A86;">))</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></div></div><h2 id="panel" tabindex="-1"><a class="header-anchor" href="#panel" aria-hidden="true">#</a> Panel</h2><p>Note you don&#39;t need to specify panel.vars if you make your data a panel dataset before running the regression using the <code>panel</code> function. For example, you can use <code>panel(dat, ~ id + var)</code>.</p><h3 id="lag-variables" tabindex="-1"><a class="header-anchor" href="#lag-variables" aria-hidden="true">#</a> Lag variables</h3><div class="code--container"><div><div class="language-stata ext-stata line-numbers-mode"><pre class="shiki" style="background-color:#191724;"><code><span class="line"><span style="color:#31748F;">xtset</span><span style="color:#E0DEF4;"> id year </span></span>
<span class="line"><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">reg</span><span style="color:#E0DEF4;"> wage educ l1.wage</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></div><div><div class="language-r ext-r line-numbers-mode"><pre class="shiki" style="background-color:#191724;"><code><span class="line"><span style="color:#E0DEF4;font-style:italic;">feols</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">wage</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">educ</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">+</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">l</span><span style="color:#6E6A86;">(</span><span style="color:#E0DEF4;font-style:italic;">wage</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#EBBCBA;">1</span><span style="color:#6E6A86;">),</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">dat</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">panel.id</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">=</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;font-style:italic;">id</span><span style="color:#31748F;">+</span><span style="color:#E0DEF4;font-style:italic;">year</span><span style="color:#6E6A86;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></div></div><h3 id="lead-variables" tabindex="-1"><a class="header-anchor" href="#lead-variables" aria-hidden="true">#</a> Lead variables</h3><div class="code--container"><div><div class="language-stata ext-stata line-numbers-mode"><pre class="shiki" style="background-color:#191724;"><code><span class="line"><span style="color:#31748F;">xtset</span><span style="color:#E0DEF4;"> id year </span></span>
<span class="line"><span style="color:#31748F;">reg</span><span style="color:#E0DEF4;"> wage educ f1.wage</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></div><div><div class="language-r ext-r line-numbers-mode"><pre class="shiki" style="background-color:#191724;"><code><span class="line"><span style="color:#E0DEF4;font-style:italic;">feols</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">wage</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">educ</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">+</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">l</span><span style="color:#6E6A86;">(</span><span style="color:#E0DEF4;font-style:italic;">wage</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">-</span><span style="color:#EBBCBA;">1</span><span style="color:#6E6A86;">),</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">dat</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">panel.id</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">=</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;font-style:italic;">id</span><span style="color:#31748F;">+</span><span style="color:#E0DEF4;font-style:italic;">year</span><span style="color:#6E6A86;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></div></div><h3 id="first-difference" tabindex="-1"><a class="header-anchor" href="#first-difference" aria-hidden="true">#</a> First difference</h3><div class="code--container"><div><div class="language-stata ext-stata line-numbers-mode"><pre class="shiki" style="background-color:#191724;"><code><span class="line"><span style="color:#31748F;">xtset</span><span style="color:#E0DEF4;"> id year </span></span>
<span class="line"><span style="color:#31748F;">reg</span><span style="color:#E0DEF4;"> wage educ D.x</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></div><div><div class="language-r ext-r line-numbers-mode"><pre class="shiki" style="background-color:#191724;"><code><span class="line"><span style="color:#E0DEF4;font-style:italic;">feols</span><span style="color:#6E6A86;">(</span><span style="color:#C4A7E7;font-style:italic;">wage</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">educ</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">+</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">d</span><span style="color:#6E6A86;">(</span><span style="color:#E0DEF4;font-style:italic;">wage</span><span style="color:#6E6A86;">),</span><span style="color:#E0DEF4;"> </span><span style="color:#E0DEF4;font-style:italic;">dat</span><span style="color:#6E6A86;">,</span><span style="color:#E0DEF4;"> </span><span style="color:#C4A7E7;font-style:italic;">panel.id</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">=</span><span style="color:#E0DEF4;"> </span><span style="color:#31748F;">~</span><span style="color:#E0DEF4;font-style:italic;">id</span><span style="color:#31748F;">+</span><span style="color:#E0DEF4;font-style:italic;">year</span><span style="color:#6E6A86;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></div></div>`,56);function D(b,u){const n=e("ExternalLinkIcon");return o(),p(c,null,[y,s("p",null,[s("a",E,[F,t(n)]),d]),f],64)}var A=l(i,[["render",D]]);export{A as default};
