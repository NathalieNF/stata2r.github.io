<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Stata to R</title>

<!-- prism.js -->
<link href="https://cdn.jsdelivr.net/npm/prismjs@1.25.0/themes/prism.css" rel="stylesheet"/>
<script src="https://cdn.jsdelivr.net/npm/prismjs@1.25.0/components/prism-core.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs@1.25.0/plugins/autoloader/prism-autoloader.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs@1.25.0/plugins/normalize-whitespace/prism-normalize-whitespace.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs@1.25.0/components/prism-r.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs@1.25.0/components/prism-stan.js"></script>

<!-- tailwindCSS -->
<script src="https://cdn.tailwindcss.com/3.0.0?plugins=forms@0.4.0,typography@0.5.0,aspect-ratio@0.4.0,line-clamp@0.3.0"></script>
<style type="text/tailwindcss">
        pre[class*="language-"] {
            @apply bg-white px-4 py-4 lg:py-2 m-0;
        }

        li.toc-dot:before {
            content: "";
            width: 16px;
            height: 16px;
            position: absolute;
            top: 0px;
            left: -10px;
            background: white;
            border: 2px solid #4c807b;
            box-shadow: 2px 2px 0px #c1dddb;
            border-radius: 50%;
        }
      </style>
</head>
<body>
  <div class="bg-[#fdf9f3] px-4 md:px-8">
    <div class="w-full max-w-[96rem] mx-auto min-h-screen">
      <div class="flex flex-col xl:gap-x-8 xl:flex-row">
        <script>/* 
Prism.plugins.NormalizeWhitespace.setDefaults({
    'remove-trailing': true, 
    'remove-indent': true, 
    'left-trim': true, 
    'right-trim': true
});
*/

window.onload = function(e){ 
// Display table of contents with menu button
document.getElementById("menu-x").onclick = function () {
    document.getElementById("toc").classList.toggle("hidden");
    document.getElementById("menu-hamburger").classList.toggle("hidden");
    document.getElementById("menu-x").classList.toggle("hidden");
};
document.getElementById("menu-hamburger").onclick = function () {
    document.getElementById("toc").classList.toggle("hidden");
    document.getElementById("menu-hamburger").classList.toggle("hidden");
    document.getElementById("menu-x").classList.toggle("hidden");
};
}</script>
        <div class="flex max-h-screen flex-col xl:px-2 w-full xl:w-[20rem] flex-shrink-0 sticky bg-[#fdf9f3] xl:h-screen top-0 pt-8 md:pt-16 pb-4">
          <div class="flex flex-row space-between items-center pb-4">
            <a class="flex-grow" href="index.html">
              <h1 class="text-3xl flex flex-row items-center gap-x-2 text-[#315450] tracking-wide">
                 Stata
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-[#315450]" fill="none" viewbox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 9l3 3m0 0l-3 3m3-3H8m13 0a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                 R
              </h1>
            </a>
            <div id="menu-button" class="xl:hidden cursor-pointer">
              <svg id="menu-hamburger" xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-[#315450]" fill="none" viewbox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
              </svg>
              <svg id="menu-x" xmlns="http://www.w3.org/2000/svg" class="hidden h-8 w-8 text-[#993b27]" fill="none" viewbox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
              </svg>
            </div>
          </div>
          <div id="toc" class="hidden flex-grow w-full bg-[#fdf9f3] sticky overflow-y-scroll xl:overflow-y-auto max-h-screen xl:block xl:relative">
            <div>
              <h1 class="text-2xl font-semibold tracking-tight mt-8 text-[#315450]">
                <a href="data_cleaning.html">data.table</a>
              </h1>
              <ul class="mt-4 relative">
                <li class="toc-dot flex flex-col relative border-l-2 border-[#c1dddb] ml-2 pl-4 pb-4 hover:border-[#5b9a94] group cursor-pointer">
                  <a href="data_cleaning.html#data" class="font-medium font-light leading-4 mb-2 group-hover:font-normal">Data I/O</a>
                </li>
                <li class="toc-dot flex flex-col relative border-l-2 border-[#c1dddb] ml-2 pl-4 pb-4 hover:border-[#5b9a94] group cursor-pointer">
                  <a href="data_cleaning.html#order" class="font-medium font-light leading-4 mb-2 group-hover:font-normal">Order</a>
                </li>
                <li class="toc-dot flex flex-col relative border-l-2 border-[#c1dddb] ml-2 pl-4 pb-4 hover:border-[#5b9a94] group cursor-pointer">
                  <a href="data_cleaning.html#subset" class="font-medium font-light leading-4 mb-2 group-hover:font-normal">Subset</a>
                </li>
                <li class="toc-dot flex flex-col relative border-l-2 border-[#c1dddb] ml-2 pl-4 pb-4 hover:border-[#5b9a94] group cursor-pointer">
                  <a href="data_cleaning.html#modify" class="font-medium font-light leading-4 mb-2 group-hover:font-normal">Modify</a>
                </li>
                <li class="toc-dot flex flex-col relative border-l-2 border-[#c1dddb] ml-2 pl-4 pb-4 hover:border-[#5b9a94] group cursor-pointer">
                  <a href="data_cleaning.html#collapse" class="font-medium font-light leading-4 mb-2 group-hover:font-normal">Collapse</a>
                </li>
                <li class="toc-dot flex flex-col relative border-l-2 border-[#c1dddb] ml-2 pl-4 pb-4 hover:border-[#5b9a94] group cursor-pointer">
                  <a href="data_cleaning.html#reshape" class="font-medium font-light leading-4 mb-2 group-hover:font-normal">Reshape</a>
                </li>
                <li class="toc-dot flex flex-col relative border-l-2 border-transparent ml-2 pl-4 pb-4 hover:border-transparent group cursor-pointer">
                  <a href="data_cleaning.html#merge" class="font-medium font-light leading-4 mb-2 group-hover:font-normal">Merge</a>
                </li>
              </ul>
            </div>
            <div>
              <h1 class="text-2xl font-semibold tracking-tight mt-8 text-[#315450]">
                <a href="regression.html">fixest</a>
              </h1>
              <ul class="mt-4 relative">
                <li class="toc-dot flex flex-col relative border-l-2 border-[#c1dddb] ml-2 pl-4 pb-4 hover:border-[#5b9a94] group cursor-pointer">
                  <a href="regression.html#formula" class="font-medium font-light leading-4 mb-2 group-hover:font-normal">Formula creation</a>
                </li>
                <li class="toc-dot flex flex-col relative border-l-2 border-[#c1dddb] ml-2 pl-4 pb-4 hover:border-[#5b9a94] group cursor-pointer">
                  <a href="regression.html#interactions" class="font-medium font-light leading-4 mb-2 group-hover:font-normal">Interactions</a>
                </li>
                <li class="toc-dot flex flex-col relative border-l-2 border-[#c1dddb] ml-2 pl-4 pb-4 hover:border-[#5b9a94] group cursor-pointer">
                  <a href="regression.html#std_errors" class="font-medium font-light leading-4 mb-2 group-hover:font-normal">Standard errors</a>
                </li>
                <li class="toc-dot flex flex-col relative border-l-2 border-[#c1dddb] ml-2 pl-4 pb-4 hover:border-[#5b9a94] group cursor-pointer">
                  <a href="regression.html#post" class="font-medium font-light leading-4 mb-2 group-hover:font-normal">Postestimation</a>
                </li>
                <li class="toc-dot flex flex-col relative border-l-2 border-transparent ml-2 pl-4 pb-4 hover:border-transparent group cursor-pointer">
                  <a href="regression.html#panel" class="font-medium font-light leading-4 mb-2 group-hover:font-normal">Panel data</a>
                </li>
              </ul>
            </div>
            <div>
              <h1 class="text-2xl font-semibold tracking-tight mt-8 text-[#315450]">
                <a href="misc.html">extras</a>
              </h1>
            </div>
            <div class="mt-8 flex flex-row gap-x-4 items-center">
              <a href="https://github.com/stata2r/stata2r.github.io"><svg class="w-6 h-6 text-[#5b9a94] fill-current" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a>
              <div class="flex flex-col">
                <p class="text-sm italic text-gray-600">Have suggestions?</p>
                <p class="text-sm text-gray-600">
                  <a href="https://github.com/stata2r/stata2r.github.io/issues/new">Open an issue üìù</a>
                </p>
              </div>
            </div>
          </div>
        </div>
        <div class="flex-grow min-h-screen py-16 pb-96">
          <div class="w-full mx-auto py-12">
            <div class="pb-4 border-b-2 border-gray-600">
              <h1 class="text-black text-4xl font-bold">
                Running regressions using 
                <a href="https://lrberge.github.io/fixest/index.html" class="text-[#4c807b] italic font-semibold">fixest</a>
              </h1>
            </div>
            <div class="flex flex-col gap-y-4 text-gray-800 pt-8 text-gray-700 text-lg md:text-xl xl:text-2xl">
              <p>
                <a href="https://lrberge.github.io/fixest/index.html" class="text-[#4c807b] font-semibold underline">fixest</a>
                 (by Laurent Berge) is a package designed from the ground up in C++ to make running regressions fast and incredibly easy. It provides in-built support for a variety of linear and non-linear models, as well as regression tables and plotting methods.
              </p>
              <p>
                Before continuing, make sure that you have installed 
                <span class="font-semibold">fixest</span>
                . You only have to do this 
                <span class="italic">once</span>
                 (or as often as you want to update the package).
              </p>
              <p>
                <pre class="bg-white border-2 rounded-lg flex flex-col justify-start px-4 py-4">
                  <code class="language-r"># Install from CRAN (recommended) 
install.packages(fixest)

# Install the development version from GitHub (advanced) 
# Requires Rtools and the remotes package 
# remotes::install_github('lrberge/fixest')</code>
                </pre>
              </p>
              <p>
                Once 
                <span class="font-semibold">fixest</span>
                 is installed, don't forget to load it whenever you want to use it. Unlike Stata, you have to re-load a package every time you start a new R session.
              </p>
              <p>
                <pre class="bg-white border-2 rounded-lg flex flex-col justify-start px-4 py-4">
                  <code class="language-r"># Load fixest into our current R session 
library(fixest)</code>
                </pre>
              </p>
            </div>
          </div>
          <div class="w-full mx-auto py-12">
            <div class="pb-4 border-b-2 border-gray-600">
              <h1 class="text-black text-4xl font-bold">Introduction to fixest</h1>
            </div>
            <div class="flex flex-col gap-y-4 text-gray-800 pt-8 text-gray-700 text-lg md:text-xl xl:text-2xl">
             <p>The <a href="https://lrberge.github.io/fixest/index.html" class="text-[#4c807b] font-semibold underline">fixest</a> package contains a highly flexible set of tools that allow you to estimate a fairly large set of standard regression models. While the package certainly doesn't cover <span class="italic">every</span> model that exists, there is a non-negligible subset of Stata users for whom every model they've ever needed to run is covered by <span class="font-semibold">fixest.</span></p>
             <p>This includes regular ol' linear regression in the <span class="font-semibold">feols()</span> function, which builds off of the Base R standard regression function <span class="font-semibold">lm(),</span> but also includes things like instrumental variables via 2SLS, and of course support for as many fixed effects as you'd like. <span class="font-semibold">fixest</span> isn't limited to linear regression either, covering IV and fixed-effects support for a wide range of GLM models like logit, probit, Poisson, negative binomial, and so on in <span class="font-semibold">feglm()</span> and <span class="font-semibold">fepois().</span></p>
             <p><span class="font-semibold">fixest</span> covers all of this while being very fast. If you felt a speed boost going from Stata's <span class="font-semibold">xtreg</span> to <span class="font-semibold">reghdfe,</span> get ready for another significant improvement when moving to <span class="font-semibold">fixest.</span></p>
             <p>You also get a fair amount of convenience. Adjusting your standard errors to be heteroskedasticity-robust or clustered can be a pain in other R regression functions, but it is easy in <span class="font-semibold">fixest</span> with the <span class="font-semibold">vcov</span> option. Regression tables, coefficient and interaction-margin plots, selecting long lists of controls without having to type them all in, lagged variables, retrieving estimated fixed effects, Wald tests, and the choice of reference for categorical variables are all made easy. You even get some stuff that's rather tricky in Stata, like automatically iterating over a bunch of model specifications, basic and staggered difference-in-difference support, or Conley standard errors.</p>
             <p>Using <span class="font-semibold">fixest</span> for regression starts with writing a formula. While there are plenty of bells and whistles to ad d, at its core regression formulas take the form <span class="font-semibold">y ~ x1 + x2 | fe1 + fe2</span> where y is the outcome, x1 and x2 are predictors, and fe1 and fe2 are your sets of fixed effects.</p>
             <p>To begin, we will use a modified dataset from the CPS with some added variables for demonstration purposes. To load the data run the following:</p>
             <div class="grid grid-cols-1 justify-start gap-y-4 mt-8 text-sm">
             <pre class="bg-white border-2 rounded-lg shadow-lg flex flex-col justify-start px-4 py-4 language-stata"><code class=" language-stata">import delimited using "https://raw.githubusercontent.com/stata2r/stata2r.github.io/main/data/cps_long.csv", clear</code></pre>
             <pre class="bg-white border-2 rounded-lg shadow-lg flex flex-col justify-start px-4 py-4 language-r"><code class=" language-r">dat = data.table::fread('https://raw.githubusercontent.com/stata2r/stata2r.github.io/main/data/cps_long.csv')</code></pre>
             </div>
        </div>
          </div>
          <div class="w-full mx-auto py-12">
            <div class="pb-4 border-b-2 border-gray-600">
              <h1 class="text-black text-4xl font-bold">Cheat Sheet</h1>
            </div>
          </div>
          <div id="formula">
            <div class="w-full mx-auto py-12">
              <div class="flex flex-row">
                <h2 class="inline-block font-bold text-2xl text-[#315450]">Formula creation</h2>
              </div>
              <div class="flex flex-col gap-y-4 text-gray-600 mt-6 text-lg md:text-xl xl:text-2xl"><p>Unike Stata, which only ever has one active dataset in memory, remember that having multiple datasets in your global environment is the norm in R. We highlight this difference to head off a very common error for new Stata R users: you need to specify <i>which</i> dataset you're using in your model calls, e.g. `feols(..., data = dat)`. We'll see lots of examples below. At the same time, note that <span class="font-semibold">fixest</span> allows you to set various <span class="text-[#4c807b] underline"><a href="https://lrberge.github.io/fixest/reference/index.html#section-default-values">global options</a></span>, including which dataset you want to use for all of your regressions. Again, we'll see examples below.</p></div>
              <div class="grid grid-cols-1 xl:grid-cols-2 xl:gap-x-8 justify-start gap-y-4 mt-8">
                <div class="xl:col-span-2">
                  <h2 class="text-gray-600 text-lg font-semibold">Simple model</h2>
                </div>
                <pre class="bg-white border-2 rounded-lg flex flex-col justify-start px-4 py-4">
                  <code class="language-stata">reg wage educ</code>
                </pre>
                <pre class="bg-white border-2 rounded-lg flex flex-col justify-start px-4 py-4">
                  <code class="language-r">feols(wage ~ educ, data = dat)

# Aside 1: `data = ...` is always the first argument 
# after the model formula. So many R users would just 
# write: 
feols(wage ~ educ, dat) 

# Aside 2: You can also set your dataset globally so 
# that you don't have to reference it each time. 
setFixest_estimation(data = dat) 
feols(wage ~ educ) 
feols(wage ~ educ + age) 
# etc.</code>
                </pre>
              </div>
              <div class="grid grid-cols-1 xl:grid-cols-2 xl:gap-x-8 justify-start gap-y-4 mt-8">
                <div class="xl:col-span-2">
                  <h2 class="text-gray-600 text-lg font-semibold">Categorical variables</h2>
                </div>
                <pre class="bg-white border-2 rounded-lg flex flex-col justify-start px-4 py-4">
                  <code class="language-stata">reg wage educ i.treat 

* Specifying a baseline:
reg wage educ ib1.treat</code>
                </pre>
                <pre class="bg-white border-2 rounded-lg flex flex-col justify-start px-4 py-4">
                  <code class="language-r">feols(wage ~ educ + i(treat), dat) 

# Specifying a baseline:
feols(wage ~ educ + i(treat, ref = 1), dat)</code>
                </pre>
              </div>
              <div class="grid grid-cols-1 xl:grid-cols-2 xl:gap-x-8 justify-start gap-y-4 mt-8">
                <div class="xl:col-span-2">
                  <h2 class="text-gray-600 text-lg font-semibold">Fixed effects</h2>
                </div>
                <pre class="bg-white border-2 rounded-lg flex flex-col justify-start px-4 py-4">
                  <code class="language-stata">reghdfe wage educ, absorb(countyfips) cluster(countyfips) 





reghdfe wage educ, absorb(countyfips)</code>
                </pre>
                <pre class="bg-white border-2 rounded-lg flex flex-col justify-start px-4 py-4">
                  <code class="language-r">feols(wage ~ educ | countyfips, dat) 

# Aside: fixest automatically clusters SEs by the first 
# fixed effect (if there are any). We'll get to SEs 
# later, but if you just want iid errors for a fixed 
# effect model: 
feols(wage ~ educ | countyfips, dat, vcov = 'iid')</code>
                </pre>
              </div>
              <div class="grid grid-cols-1 xl:grid-cols-2 xl:gap-x-8 justify-start gap-y-4 mt-8">
                <div class="xl:col-span-2">
                  <h2 class="text-gray-600 text-lg font-semibold">Instrumental variables</h2>
                </div>
                <pre class="bg-white border-2 rounded-lg flex flex-col justify-start px-4 py-4">
                  <code class="language-stata">ivreg 2sls wage (educ = age) 

* With fixed effects 
ivreghdfe 2sls wage (educ = age), absorb(countyfips)</code>
                </pre>
                <pre class="bg-white border-2 rounded-lg flex flex-col justify-start px-4 py-4">
                  <code class="language-r">feols(wage ~ 1 | educ ~ age, dat) 

# With fixed effects 
feols(wage ~ 1 | countyfips | educ ~ age, dat)</code>
                </pre>
              </div>
              <div class="grid grid-cols-1 xl:grid-cols-2 xl:gap-x-8 justify-start gap-y-4 mt-8">
                <div class="xl:col-span-2">
                  <h2 class="text-gray-600 text-lg font-semibold">Macros</h2>
                </div>
                <pre class="bg-white border-2 rounded-lg flex flex-col justify-start px-4 py-4">
                  <code class="language-stata">local vars age black hisp marr 
 reghdfe wage educ `vars'</code>
                </pre>
                <pre class="bg-white border-2 rounded-lg flex flex-col justify-start px-4 py-4">
                  <code class="language-r">vars = c("age", "black", "hisp", "marr") 
 feols(wage ~ educ + .[vars], dat)</code>
                </pre>
              </div>
              <div class="grid grid-cols-1 xl:grid-cols-2 xl:gap-x-8 justify-start gap-y-4 mt-8">
                <div class="xl:col-span-2">
                  <h2 class="text-gray-600 text-lg font-semibold">Wildcard</h2>
                </div>
                <pre class="bg-white border-2 rounded-lg flex flex-col justify-start px-4 py-4">
                  <code class="language-stata">reghdfe wage educ x*</code>
                </pre>
                <pre class="bg-white border-2 rounded-lg flex flex-col justify-start px-4 py-4">
                  <code class="language-r">feols(wage ~ educ + ..('x'), dat)</code>
                </pre>
              </div>
              <div class="grid grid-cols-1 xl:grid-cols-2 xl:gap-x-8 justify-start gap-y-4 mt-8">
                <div class="xl:col-span-2">
                  <h2 class="text-gray-600 text-lg font-semibold">Variables x1 ... x4</h2>
                </div>
                <pre class="bg-white border-2 rounded-lg flex flex-col justify-start px-4 py-4">
                  <code class="language-stata">reghdfe wage educ x1-x4</code>
                </pre>
                <pre class="bg-white border-2 rounded-lg flex flex-col justify-start px-4 py-4">
                  <code class="language-r">feols(wage ~ educ + x.[1:4], dat)</code>
                </pre>
              </div>
              <div class="grid grid-cols-1 xl:grid-cols-2 xl:gap-x-8 justify-start gap-y-4 mt-8">
                <div class="xl:col-span-2">
                  <h2 class="text-gray-600 text-lg font-semibold">Regex</h2>
                </div>
                <pre class="bg-white border-2 rounded-lg flex flex-col justify-start px-4 py-4">
                  <code class="language-stata">?</code>
                </pre>
                <pre class="bg-white border-2 rounded-lg flex flex-col justify-start px-4 py-4">
                  <code class="language-r">feols(wage ~ educ + ..('pattern'), dat)</code>
                </pre>
              </div>
            </div>
          </div>
          <div id="interactions">
            <div class="w-full mx-auto py-12">
              <div class="flex flex-row">
                <h2 class="inline-block font-bold text-2xl text-[#315450]">Interactions</h2>
              </div>
              <div class="grid grid-cols-1 xl:grid-cols-2 xl:gap-x-8 justify-start gap-y-4 mt-8">
                <div class="xl:col-span-2">
                  <h2 class="text-gray-600 text-lg font-semibold">Interact continuous variables</h2>
                </div>
                <pre class="bg-white border-2 rounded-lg flex flex-col justify-start px-4 py-4">
                  <code class="language-stata">reg wage c.educ#c.age 

reg wage c.educ##c.age</code>
                </pre>
                <pre class="bg-white border-2 rounded-lg flex flex-col justify-start px-4 py-4">
                  <code class="language-r">feols(wage ~ educ:age, dat) 

feols(wage ~ educ*age, dat)</code>
                </pre>
              </div>
              <div class="grid grid-cols-1 xl:grid-cols-2 xl:gap-x-8 justify-start gap-y-4 mt-8">
                <div class="xl:col-span-2">
                  <h2 class="text-gray-600 text-lg font-semibold">Interact categorical variables</h2>
                </div>
                <pre class="bg-white border-2 rounded-lg flex flex-col justify-start px-4 py-4">
                  <code class="language-stata">reg wage i.treat#i.hisp 




reg wage i.treat i.treat#i.hisp
reg wage i.treat##i.hisp</code>
                </pre>
                <pre class="bg-white border-2 rounded-lg flex flex-col justify-start px-4 py-4">
                  <code class="language-r">feols(wage ~ i(treat, i.hisp), dat) 

# Aside: i() is a fixest-specific shortcut that also 
# has synergies with some other fixest functions. But 
# base R interaction operators all still work, e.g. 
feols(wage ~ factor(treat)/factor(hisp), dat) 
feols(wage ~ factor(treat)*factor(hisp), dat)</code>
                </pre>
              </div>
              <div class="grid grid-cols-1 xl:grid-cols-2 xl:gap-x-8 justify-start gap-y-4 mt-8">
                <div class="xl:col-span-2">
                  <h2 class="text-gray-600 text-lg font-semibold">Interact categorical with continuous variables</h2>
                </div>
                <pre class="bg-white border-2 rounded-lg flex flex-col justify-start px-4 py-4">
                  <code class="language-stata">reg wage i.treat#c.age 




reg wage i.treat#c.age 
reg wage i.treat i.treat#c.age 
reg wage i.treat##c.age</code>
                </pre>
                <pre class="bg-white border-2 rounded-lg flex flex-col justify-start px-4 py-4">
                  <code class="language-r">feols(wage ~ i(treat, age), dat) 

# Aside: i() is a fixest-specific shortcut that also 
# has synergies with some other fixest functions. But 
# base R interaction operators all still work, e.g. 
feols(wage ~ factor(treat):age, dat) 
feols(wage ~ factor(treat)/age, dat) 
feols(wage ~ factor(treat)*age, dat)</code>
                </pre>
              </div>
              <div class="grid grid-cols-1 xl:grid-cols-2 xl:gap-x-8 justify-start gap-y-4 mt-8">
                <div class="xl:col-span-2">
                  <h2 class="text-gray-600 text-lg font-semibold">Interact fixed effects</h2>
                </div>
                <pre class="bg-white border-2 rounded-lg flex flex-col justify-start px-4 py-4">
                  <code class="language-stata">* Combine fixed effects 
reghdfe wage educ, absorb(statefips#year) 

* Varying slopes (e.g. time trend for each state) 
? </code>
                </pre>
                <pre class="bg-white border-2 rounded-lg flex flex-col justify-start px-4 py-4">
                  <code class="language-r"># Combine fixed effects 
feols(wage ~ educ | statefips^year, dat) 

# Varying slopes (e.g. time trend for each state) 
feols(wage ~ educ | statefips[year], dat)</code>
                </pre>
              </div>
            </div>
          </div>
          <div id="std_errors">
            <div class="w-full mx-auto py-12">
              <div class="flex flex-row">
                <h2 class="inline-block font-bold text-2xl text-[#315450]">Standard errors</h2>
              </div>
              <div class="flex flex-col gap-y-4 text-gray-600 mt-6 text-lg md:text-xl xl:text-2xl"><p>While you can specify standard errors inside the original <span class="font-semibold">fixest</span> model call (just like Stata), a unique feature of R is that you can adjust errors for an exisiting model <i>on the fly</i>. This has <span class="text-[#4c807b] underline"><a href = "https://grantmcdermott.com/better-way-adjust-SEs">several benefits</a></span>, including being much more efficient since you don't have to re-estimate your whole model. We'll try to highlight examples of both approaches below.</p></div>
              <div class="grid grid-cols-1 xl:grid-cols-2 xl:gap-x-8 justify-start gap-y-4 mt-8">
                <div class="xl:col-span-2">
                  <h2 class="text-gray-600 text-lg font-semibold">HC</h2>
                </div>
                <pre class="bg-white border-2 rounded-lg flex flex-col justify-start px-4 py-4">
                  <code class="language-stata">reghdfe wage educ, vce(robust) 
reghdfe wage educ, vce(hc3)</code>
                </pre>
                <pre class="bg-white border-2 rounded-lg flex flex-col justify-start px-4 py-4">
                  <code class="language-r">feols(wage ~ educ, dat, vcov = 'hc1') 
feols(wage ~ educ, dat, vcov = sandwich:vcovHC) 

# Note: You can also adjust the SEs of an existing model 
m = feols(wage ~ educ, dat) 
summary(m, vcov = 'hc1')</code>
                </pre>
              </div>
              <div class="grid grid-cols-1 xl:grid-cols-2 xl:gap-x-8 justify-start gap-y-4 mt-8">
                <div class="xl:col-span-2">
                  <h2 class="text-gray-600 text-lg font-semibold">HAC</h2>
                </div>
                <pre class="bg-white border-2 rounded-lg flex flex-col justify-start px-4 py-4">
                  <code class="language-stata">xtset id year
ivreghdfe wage educ, bw(auto) vce(robust)</code>
                </pre>
                <pre class="bg-white border-2 rounded-lg flex flex-col justify-start px-4 py-4">
                  <code class="language-r">feols(y ~ x, dat, vcov = 'NW', panel.id = ~unit + time)
feols(wage ~ educ, dat, vcov = 'NW') # if panel id is already set (see below)</code>
                </pre>
              </div>
              <div class="grid grid-cols-1 xl:grid-cols-2 xl:gap-x-8 justify-start gap-y-4 mt-8">
                <div class="xl:col-span-2">
                  <h2 class="text-gray-600 text-lg font-semibold">Clustered</h2>
                </div>
                <pre class="bg-white border-2 rounded-lg flex flex-col justify-start px-4 py-4">
                  <code class="language-stata">reghdfe wage educ, absorb(countyfips) vce(cluster countyfips) </code>
                </pre>
                <pre class="bg-white border-2 rounded-lg flex flex-col justify-start px-4 py-4">
                  <code class="language-r">feols(wage ~ educ | countyfips, dat) # Auto clusters by FE 
feols(wage ~ educ | countyfips, dat, vcov = ~countyfips) # ofc can be explicit too</code>
                </pre>
              </div>
              <div class="grid grid-cols-1 xl:grid-cols-2 xl:gap-x-8 justify-start gap-y-4 mt-8">
                <div class="xl:col-span-2">
                  <h2 class="text-gray-600 text-lg font-semibold">Two-way etc.</h2>
                </div>
                <pre class="bg-white border-2 rounded-lg flex flex-col justify-start px-4 py-4">
                  <code class="language-stata">reghdfe wage educ, absorb(countyfips year) vce(cluster countyfips year) 


reghdfe wage educ, absorb(countyfips) vce(cluster#countyfips)</code>
                </pre>
                <pre class="bg-white border-2 rounded-lg flex flex-col justify-start px-4 py-4">
                  <code class="language-r">feols(wage ~ educ | countyfips + year, dat, vcov = ~countyfips + year) 
feols(wage ~ educ | countyfips + year, dat, vcov = 'twoway') # same 

feols(wage ~ educ | countyfips + year, dat, vcov = ~countyfips^year) 

# Reminder that you can adjust the SEs of existing 
# fixest models on-the-fly. 
m = feols(wage ~ educ | countyfips + year, dat) 
m 
summary(m, vcov = 'twoway') 
summmary(m, vcov = ~countyfips^year) 
# etc.</code>
                </pre>
              </div>
              <div class="grid grid-cols-1 xl:grid-cols-2 xl:gap-x-8 justify-start gap-y-4 mt-8">
                <div class="xl:col-span-2">
                  <h2 class="text-gray-600 text-lg font-semibold">Conley standard errors</h2>
                </div>
                <pre class="bg-white border-2 rounded-lg flex flex-col justify-start px-4 py-4">
                  <code class="language-stata">* See: http://www.trfetzer.com/conley-spatial-hac-errors-with-fixed-effects/</code>
                </pre>
                <pre class="bg-white border-2 rounded-lg flex flex-col justify-start px-4 py-4">
                  <code class="language-r">feols(wage ~ educ, dat, vcov = conley("25 mi"))</code>
                </pre>
              </div>
            </div>
          </div>
          <div id="post">
            <div class="w-full mx-auto py-12">
              <div class="flex flex-row">
                <h2 class="inline-block font-bold text-2xl text-[#315450]">Postestimation</h2>
              </div>
              <div class="grid grid-cols-1 xl:grid-cols-2 xl:gap-x-8 justify-start gap-y-4 mt-8">
                <div class="xl:col-span-2">
                  <h2 class="text-gray-600 text-lg font-semibold">Regression table</h2>
                </div>
                <pre class="bg-white border-2 rounded-lg flex flex-col justify-start px-4 py-4">
                  <code class="language-stata">reghdfe wage educ age black hisp marr 
eststore est1 
esttab est1

reghdfe wage educ age black hisp
eststore est2
esttab est1 est2</code>
                </pre>
                <pre class="bg-white border-2 rounded-lg flex flex-col justify-start px-4 py-4">
                  <code class="language-r">est1 = feols(wage ~ educ + age + black + hisp + marr, dat) 
 etable(est1)


est2 = feols(wage ~ educ + age + black + hisp, dat) 
etable(est1,est2)</code>
                </pre>
              </div>
              <div class="grid grid-cols-1 xl:grid-cols-2 xl:gap-x-8 justify-start gap-y-4 mt-8">
                <div class="xl:col-span-2">
                  <h2 class="text-gray-600 text-lg font-semibold">Coefficient plot</h2>
                </div>
                <pre class="bg-white border-2 rounded-lg flex flex-col justify-start px-4 py-4">
                  <code class="language-stata">reghdfe wage educ age black hisp marr  
 eststore est1 
 coefplot ...</code>
                </pre>
                <pre class="bg-white border-2 rounded-lg flex flex-col justify-start px-4 py-4">
                  <code class="language-r">est1 = feols(wage ~ educ + age + black + hisp + marr, dat) 
 coefplot(est1)</code>
                </pre>
              </div>
            </div>
          </div>
          <div id="panel">
            <div class="w-full mx-auto py-12">
              <div class="flex flex-row">
                <h2 class="inline-block font-bold text-2xl text-[#315450]">Panel data</h2>
              </div>
              <div class="flex flex-col gap-y-4 text-gray-600 mt-6 text-lg md:text-xl xl:text-2xl"><p>Note you don't need to specify panel.vars if you make your data a panel dataset before running the regression using the `panel` function. For example, you can use `panel(dat, ~ id + var)`.</div>
              <div class="grid grid-cols-1 xl:grid-cols-2 xl:gap-x-8 justify-start gap-y-4 mt-8">
                <div class="xl:col-span-2">
                  <h2 class="text-gray-600 text-lg font-semibold">Lag variables</h2>
                </div>
                <pre class="bg-white border-2 rounded-lg flex flex-col justify-start px-4 py-4">
                  <code class="language-stata">xtset id year 
 reg wage educ l1.wage</code>
                </pre>
                <pre class="bg-white border-2 rounded-lg flex flex-col justify-start px-4 py-4">
                  <code class="language-r">feols(wage ~ educ + l(wage, 1), dat, panel.id = ~id+year)</code>
                </pre>
              </div>
              <div class="grid grid-cols-1 xl:grid-cols-2 xl:gap-x-8 justify-start gap-y-4 mt-8">
                <div class="xl:col-span-2">
                  <h2 class="text-gray-600 text-lg font-semibold">Lead variables</h2>
                </div>
                <pre class="bg-white border-2 rounded-lg flex flex-col justify-start px-4 py-4">
                  <code class="language-stata">xtset id year 
 reg wage educ f1.wage</code>
                </pre>
                <pre class="bg-white border-2 rounded-lg flex flex-col justify-start px-4 py-4">
                  <code class="language-r">feols(wage ~ educ + l(wage, -1), dat, panel.id = ~id+year)</code>
                </pre>
              </div>
              <div class="grid grid-cols-1 xl:grid-cols-2 xl:gap-x-8 justify-start gap-y-4 mt-8">
                <div class="xl:col-span-2">
                  <h2 class="text-gray-600 text-lg font-semibold">First difference</h2>
                </div>
                <pre class="bg-white border-2 rounded-lg flex flex-col justify-start px-4 py-4">
                  <code class="language-stata">xtset id year 
 reg wage educ D.x</code>
                </pre>
                <pre class="bg-white border-2 rounded-lg flex flex-col justify-start px-4 py-4">
                  <code class="language-r">feols(wage ~ educ + d(wage), dat, panel.id = ~id+year)</code>
                </pre>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>